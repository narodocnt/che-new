<div id="rating"></div>

<script>
async function loadRating() {
  try {
    const res = await fetch('/data/rating.json', { cache: "no-cache" });
    if (!res.ok) throw new Error('Failed to fetch rating');
    const data = await res.json();

    const container = document.getElementById('rating');
    container.innerHTML = '<h2>ТОП-10 колективів тижня</h2>';
    const list = document.createElement('div');
    list.className = 'cards';
    data.slice(0,10).forEach((c, i) => {
      const card = document.createElement('div');
      card.className = 'card rank-anim';
      card.innerHTML = `<h3>${i+1}. ${c.name}</h3>
                        <p>${c.views.toLocaleString('uk-UA')} переглядів</p>`;
      list.appendChild(card);
      // невеличка анімація появи
      card.style.opacity = 0;
      setTimeout(()=>{ card.style.transition = 'all .4s ease'; card.style.opacity = 1; card.style.transform = 'translateY(0)'; }, 100 + i*80);
    });
    container.appendChild(list);
  } catch (e) {
    console.error(e);
  }
}

loadRating();
</script>

<style>
.rank-anim { transform: translateY(8px); opacity: 0; }
</style>
