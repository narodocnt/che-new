<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Google Auth Callback</title>
</head>
<body>

<p>‚è≥ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è‚Ä¶</p>

<script>
(async () => {
    const params = new URLSearchParams(window.location.search);
    const code = params.get("code");

    if (!code) {
        document.body.innerHTML = "‚ùå –ù–µ–º–∞—î authorization code";
        return;
    }

    try {
        const res = await fetch(
            "https://n8n.narodocnt.online/webhook/google-signup",
            {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ code })
            }
        );

        if (!res.ok) {
            const txt = await res.text();
            throw new Error(txt);
        }

        document.body.innerHTML = "‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞<br>–ú–æ–∂–Ω–∞ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É üéâ";
    } catch (err) {
        console.error(err);
        document.body.innerHTML = "‚ùå –ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó";
    }
})();
</script>

</body>
</html>
