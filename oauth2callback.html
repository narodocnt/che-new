<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Google Login</title>
</head>
<body>

<h3>Вхід через Google…</h3>

<script>
const params = new URLSearchParams(window.location.search);
const code = params.get("code");

if (!code) {
    document.body.innerHTML = "❌ Помилка авторизації Google";
} else {
    fetch("https://n8n.narodocnt.online/webhook/google-login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ code })
    })
    .then(res => res.json())
    .then(data => {
        localStorage.setItem("user", JSON.stringify(data));
        window.location.href = "/";
    })
    .catch(() => {
        document.body.innerHTML = "❌ Помилка сервера";
    });
}
</script>

</body>
</html>
