<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–í—ñ–¥–¥—ñ–ª –Ω–∞—Ä–æ–¥–Ω–æ—ó —Ç–≤–æ—Ä—á–æ—Å—Ç—ñ</title>

    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <meta http-equiv="Permissions-Policy" content="identity-credentials-get=(self 'https://accounts.google.com')">

    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; padding: 0; background: #f0f2f5; color: #333; 
        }
        header { 
            background: #8b0000; color: white; padding: 20px; text-align: center; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        header h3 a { color: #ffcc00; text-decoration: none; font-size: 18px; display: block; }
        header h3 a:hover { text-decoration: underline; }
        .header-buttons { margin-top: 15px; display: flex; justify-content: center; gap: 15px; }
        .header-buttons button {
            padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;
        }
        .login-btn { background: #007bff; color: white; }
        .register-btn { background: #28a745; color: white; }

        nav { 
            background: #b30000; padding: 12px 0; display: flex; justify-content: center; gap: 30px; 
            position: sticky; top: 0; z-index: 1000;
        }
        nav a { color: white; text-decoration: none; font-weight: 600; padding: 8px 15px; border-radius: 4px; transition: 0.3s; }
        nav a:hover { background-color: #d60000; }

        .container { max-width: 1000px; margin: 30px auto; padding: 30px; background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .section-title { font-size: 32px; margin-bottom: 20px; color: #8b0000; border-bottom: 3px solid #ffcc00; padding-bottom: 5px; display: inline-block; }

        ul { list-style-type: 'üîπ '; padding-left: 20px; }
        ul li { margin-bottom: 10px; }

        .container#contacts a { color: #8b0000; text-decoration: none; font-weight: bold; }
        .container#contacts a:hover { text-decoration: underline; }

        footer { background: #b30000; color: white; text-align: center; padding: 20px; margin-top: 40px; font-size: 14px; }

        /* –§–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó */
        #manualForm input, #manualForm button { width: 100%; padding: 10px; margin: 8px 0; border-radius: 6px; border: 1px solid #ccd; }
        #manualForm button { background: #007bff; color: white; border: none; cursor: pointer; }
        .divider { text-align: center; margin: 14px 0; color: #666; }
        .note { font-size: 13px; color: #666; margin-top: 8px; }
        .hidden { display: none; }
        .error { color: #b00; font-weight: 600; }
    </style>
</head>
<body>
    <header>
        <h1>–í—ñ–¥–¥—ñ–ª –Ω–∞—Ä–æ–¥–Ω–æ—ó —Ç–≤–æ—Ä—á–æ—Å—Ç—ñ</h1>
        <h3><a href="https://www.facebook.com/narodocntcherkasy/" target="_blank">–û–±–ª–∞—Å–Ω–∏–π –¶–µ–Ω—Ç—Ä –ù–∞—Ä–æ–¥–Ω–æ—ó –¢–≤–æ—Ä—á–æ—Å—Ç—ñ</a></h3>
        <div class="header-buttons">
            <button id="googleLoginHeader" class="login-btn">–£–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</button>
            <button class="register-btn" onclick="document.getElementById('manualForm').scrollIntoView({behavior:'smooth'});">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
        </div>
    </header>

    <nav>
        <a href="#about">–ü—Ä–æ –Ω–∞—Å</a>
        <a href="#collectives">–ö–æ–ª–µ–∫—Ç–∏–≤–∏ üé≠</a>
        <a href="#events">–ü–æ–¥—ñ—ó</a>
        <a href="#">–ü–µ–¥–∞–≥–æ–≥–∞–º</a>
        <a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
    </nav>

    <div class="container" id="about">
        <h2 class="section-title">–ü—Ä–æ –Ω–∞—Å</h2>
        <p>–í—ñ–¥–¥—ñ–ª –Ω–∞—Ä–æ–¥–Ω–æ—ó —Ç–≤–æ—Ä—á–æ—Å—Ç—ñ –∑–∞–π–º–∞—î—Ç—å—Å—è —Ä–æ–∑–≤–∏—Ç–∫–æ–º —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Ç–≤–æ—Ä—á–∏—Ö –∫–æ–ª–µ–∫—Ç–∏–≤—ñ–≤ –æ–±–ª–∞—Å—Ç—ñ, –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—î—é —Ñ–µ—Å—Ç–∏–≤–∞–ª—ñ–≤, —Å–µ–º—ñ–Ω–∞—Ä—ñ–≤, –æ–≥–ª—è–¥—ñ–≤ —Ç–∞ –ø–æ–ø—É–ª—è—Ä–∏–∑–∞—Ü—ñ—î—é —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –∫—É–ª—å—Ç—É—Ä–∏.</p>
    </div>

    <div class="container" id="collectives">
        <h2 class="section-title">–ù–∞—à—ñ –∫–æ–ª–µ–∫—Ç–∏–≤–∏</h2>
        <ul>
            <li>–ù–∞—Ä–æ–¥–Ω—ñ —Ç–∞ –∑—Ä–∞–∑–∫–æ–≤—ñ –∫–æ–ª–µ–∫—Ç–∏–≤–∏</li>
            <li>–¢—Ä–æ—ó—Å—Ç—ñ –º—É–∑–∏–∫–∏</li>
            <li>–î—É—Ö–æ–≤—ñ –æ—Ä–∫–µ—Å—Ç—Ä–∏</li>
            <li>–•–æ—Ä–µ–æ–≥—Ä–∞—Ñ—ñ—á–Ω—ñ</li>
            <li>–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω—ñ</li>
            <li>–¢–µ–∞—Ç—Ä–∞–ª—å–Ω—ñ</li>
            <li>–í–æ–∫–∞–ª—å–Ω–æ-—Ö–æ—Ä–æ–≤—ñ</li>
        </ul>
    </div>

    <div class="container" id="events">
        <h2 class="section-title">–ü–æ–¥—ñ—ó —Ç–∞ –Ω–æ–≤–∏–Ω–∏</h2>
        <p>–û–≥–æ–ª–æ—à–µ–Ω–Ω—è, –∫–æ–Ω–∫—É—Ä—Å–∏, —Ñ–µ—Å—Ç–∏–≤–∞–ª—ñ, —Å–µ–º—ñ–Ω–∞—Ä–∏ ‚Äî –≤—Å–µ –≤–∞–∂–ª–∏–≤–µ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ.</p>
    </div>

    <div class="container" id="ratings">
        <h2 class="section-title">–†–µ–π—Ç–∏–Ω–≥ –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤ (Facebook)</h2>
        <p>–°—é–¥–∏ –±—É–¥–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≥—Ä–∞—Ñ—ñ–∫ –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤ –≤—ñ–¥–µ–æ –∑ <a href="https://www.facebook.com/narodocntcherkasy/" target="_blank">–Ω–∞—à–æ—ó Facebook-—Å—Ç–æ—Ä—ñ–Ω–∫–∏</a> (—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è —á–µ—Ä–µ–∑ API –∞–±–æ n8n).</p>
    </div>

    <div class="container" id="contacts">
        <h2 class="section-title">–ö–æ–Ω—Ç–∞–∫—Ç–∏</h2>
        <p>Email: info@example.com</p>
        <p>–¢–µ–ª–µ—Ñ–æ–Ω: +380 00 000 00 00</p>
        <p><strong>–ú–∏ —É Facebook:</strong> <a href="https://www.facebook.com/narodocntcherkasy/" target="_blank">facebook.com/narodocntcherkasy</a></p>
    </div>

    <!-- –§–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ GSI -->
    <div class="container" id="manualForm">
        <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>
        <form id="manualFormElement">
            <input id="lastname" type="text" placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ" required />
            <input id="firstname" type="text" placeholder="–Ü–º'—è" required />
            <input id="email" type="email" placeholder="–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞" required />
            <button type="submit">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
        </form>

        <div class="divider">–∞–±–æ</div>

        <div id="gsi-area">
            <div id="g_id_onload"
                 data-client_id="225496350184-4q6j2iqu5n9hkjt8u4age31bd4nkmedo.apps.googleusercontent.com"
                 data-auto_prompt="false"
                 data-context="signin"
                 data-ux_mode="popup"
                 data-callback="handleGoogleLogin"></div>

            <div class="g_id_signin" data-type="standard"></div>

            <div id="gsi-error" class="note error hidden"></div>
        </div>

        <div id="oauth-fallback" class="hidden">
            <div class="note">–Ø–∫—â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤—Ö—ñ–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π —É —Ü—å–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –ø—ñ–¥–∫–∞–∑–∞–Ω—É –∫–Ω–æ–ø–∫—É:</div>
            <button id="oauthBtn">Login with Google (fallback)</button>
            <div class="note">–ü—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ OAuth2 popup. Redirect URI –º–∞—î –±—É—Ç–∏ –¥–æ–¥–∞–Ω–∏–π –≤ Google Cloud Console.</div>
        </div>

        <div id="result" class="note hidden"></div>
    </div>

    <footer>
        ¬© 2025 –í—ñ–¥–¥—ñ–ª –Ω–∞—Ä–æ–¥–Ω–æ—ó —Ç–≤–æ—Ä—á–æ—Å—Ç—ñ –û–¶–ù–¢
    </footer>

    <script>
        // --- –û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ä–º–∏
        function show(elem){ elem.classList.remove('hidden'); }
        function hide(elem){ elem.classList.add('hidden'); }
        function setText(elem, txt){ elem.textContent = txt; }

        const gsiErrorEl = document.getElementById('gsi-error');
        const oauthFallbackEl = document.getElementById('oauth-fallback');
        const resultEl = document.getElementById('result');

        document.getElementById('manualFormElement').addEventListener('submit', function(e){
            e.preventDefault();
            const data = {
                lastname: document.getElementById('lastname').value.trim(),
                firstname: document.getElementById('firstname').value.trim(),
                email: document.getElementById('email').value.trim()
            };
            setText(resultEl, '–ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ (–ª–æ–∫–∞–ª—å–Ω–æ): ' + JSON.stringify(data));
            show(resultEl);
        });

        function handleGoogleLogin(response){
            try{
                if(!response || !response.credential) throw new Error('No credential');
                console.log('GSI credential (ID token):', response.credential);
                setText(resultEl, '–£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥ —á–µ—Ä–µ–∑ Google (ID Token –æ—Ç—Ä–∏–º–∞–Ω–æ). –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å.');
                show(resultEl);
            }catch(err){
                console.error('GSI callback error', err);
                setText(gsiErrorEl, '–ü–æ–º–∏–ª–∫–∞ –æ–±—Ä–æ–±–∫–∏ Google identity: ' + err.message);
                show(gsiErrorEl);
            }
        }

        // –ö–Ω–æ–ø–∫–∞ –≤ —à–∞–ø—Ü—ñ –¥–ª—è –≤—Ö–æ–¥—É —á–µ—Ä–µ–∑ Google
        document.getElementById('googleLoginHeader').addEventListener('click', function(){
            const btn = document.querySelector('.g_id_signin');
            if(btn){
                btn.click();
            } else {
                alert('Google Sign-In —â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π.');
            }
        });

        // OAuth fallback
        const CLIENT_ID = '225496350184-4q6j2iqu5n9hkjt8u4age31bd4nkmedo.apps.googleusercontent.com';
        const REDIRECT_URI = window.location.origin + '/oauth2callback';
        const SCOPE = 'openid email profile';

        document.getElementById('oauthBtn').addEventListener('click', function(){
            const authUrl = 'https://accounts.google.com/o/oauth2/v2/auth' +
                '?client_id=' + encodeURIComponent(CLIENT_ID) +
                '&redirect_uri=' + encodeURIComponent(REDIRECT_URI) +
                '&response_type=token' +
                '&scope=' + encodeURIComponent(SCOPE) +
                '&prompt=select_account';
            const w = 600, h = 700;
            const left = (screen.width/2) - (w/2);
            const top = (screen.height/2) - (h/2);
            const popup = window.open(authUrl, 'google_oauth', 'width=' + w + ',height=' + h + ',top=' + top + ',left=' + left);
            function onMessage(e){
                if(e.origin !== window.location.origin) return;
                if(e.data && e.data.type === 'oauth-token'){
                    setText(resultEl, 'OAuth token (fallback) –æ—Ç—Ä–∏–º–∞–Ω–æ: ' + e.data.access_token);
                    show(resultEl);
                    window.removeEventListener('message', onMessage);
                    popup.close();
                }
            }
            window.addEventListener('message', onMessage);
        });
    </script>
</body>
</html>
